(this.webpackJsonpjoinrave=this.webpackJsonpjoinrave||[]).push([[0],{11:function(t,i,e){"use strict";e.r(i);var n=e(1),s=e.n(n),o=e(4),d=e.n(o),a=(e(9),e(2)),c=e.p+"static/media/play.67fb6362.svg",r=e.p+"static/media/pause.12407eb8.svg",h=function(){window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var t,i=90,e=2265,n=1465,s=e/i,o=n/i,d=5e-4,a=.01,c=0,r=0,h=0,u=!1,m=function(){this.x=0,this.y=0,this.vx=0,this.vy=0,this.ind_x=0,this.ind_y=0};function v(t,i,e,n){y.moveTo(t.x,t.y),y.lineTo(i.x,i.y),y.moveTo(t.x,t.y),y.lineTo(n.x,n.y),88==t.ind_x&&(y.moveTo(e.x,e.y),y.lineTo(n.x,n.y)),88==t.ind_y&&(y.moveTo(e.x,e.y),y.lineTo(i.x,i.y))}function l(){y.fillStyle="hsla(0, 5%, 5%, .1)",y.fillRect(0,0,e,n),function(){for(var e=0;e<i;e++)for(var n=0;n<i;n++)t[e][n].frame()}(),function(){y.strokeStyle="hsla("+c%360+",100%,50%,1)",y.beginPath(),c-=.5;for(var i=0;i<89;i+=1)for(var e=0;e<89;e+=1)v(t[i][e],t[i][e+1],t[i+1][e+1],t[i+1][e]);y.stroke()}()}m.prototype.frame=function(){if(0!=this.ind_x&&89!=this.ind_x&&0!=this.ind_y&&89!=this.ind_y){var i=0,e=0,n=this.ind_x*s-this.x,c=this.ind_y*o-this.y;if(i=d*n,e=d*c,i-=a*(this.x-t[this.ind_x-1][this.ind_y].x),e-=a*(this.y-t[this.ind_x-1][this.ind_y].y),i-=a*(this.x-t[this.ind_x+1][this.ind_y].x),e-=a*(this.y-t[this.ind_x+1][this.ind_y].y),i-=a*(this.x-t[this.ind_x][this.ind_y-1].x),e-=a*(this.y-t[this.ind_x][this.ind_y-1].y),i-=a*(this.x-t[this.ind_x][this.ind_y+1].x),e-=a*(this.y-t[this.ind_x][this.ind_y+1].y),this.vx+=i-.02*this.vx,this.vy+=e-.02*this.vy,this.x+=.98*this.vx,this.y+=.98*this.vy,u){var m=this.x-r,v=this.y-h,l=Math.sqrt(m*m+v*v);l<50&&(l=l<10?10:l,this.x-=m/l*5,this.y-=v/l*5)}}};var y,f=document.getElementById("canv");function x(t){u=!0}function w(t){u=!1}function j(t){var i=t.target.getBoundingClientRect();r=t.clientX-i.left,h=t.clientY-i.top}(y=f.getContext("2d")).fillStyle="hsla(0, 5%, 5%, .1)",y.fillRect(0,0,e,n),window.requestAnimFrame((function(){t=[];for(var e=0;e<i;e++){t.push([]);for(var n=0;n<i;n++){var d=new m;d.ind_x=e,d.ind_y=n,d.x=e*s,d.y=n*o,t[e][n]=d}}})),document.addEventListener("mousemove",j,!1),document.addEventListener("mousedown",x,!1),document.addEventListener("mouseup",w,!1),document.addEventListener("touchstart",x,!1),document.addEventListener("touchmove",j,!1),document.addEventListener("touchend",w,!1),function t(){window.requestAnimFrame(l),window.requestAnimFrame(t,33)}(),f.width<window.innerWidth&&(f.width=window.innerWidth),f.height<window.innerHeight&&(f.height=window.innerHeight)},u=e(0),m=new Audio;var v=function(){var t,i,e=Object(n.useState)(null),s=Object(a.a)(e,2),o=s[0],d=s[1],v=Object(n.useState)(!1),l=Object(a.a)(v,2),y=l[0],f=l[1],x=Object(n.useState)(!1),w=Object(a.a)(x,2),j=w[0],b=w[1],_=Object(n.useState)(!1),p=Object(a.a)(_,2),O=p[0],g=p[1],E=function(){b(!0),fetch("https://api.joinrave.com/current").then((function(t){return t.json()})).then((function(t){d(t),m.src=t.metadata.file,m.load()})).catch((function(){b(!1)}))},L=function(){O||g(!0)};return Object(n.useEffect)((function(){O&&o&&(m.currentTime=o.time,m.play(),f(!0),b(!1))}),[O,o]),Object(n.useEffect)((function(){return m.addEventListener("ended",E),m.addEventListener("canplay",L),function(){m.removeEventListener("ended",E),m.removeEventListener("canplay",L)}}),[]),Object(n.useLayoutEffect)((function(){try{h()}catch(t){console.log(t)}}),[h]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("canvas",{id:"canv",width:"2265",height:"1465"}),Object(u.jsxs)("div",{className:"app",children:[y?Object(u.jsx)("img",{src:r,onClick:function(){m.pause(),f(!1),g(!1)}}):Object(u.jsx)("img",{src:c,onClick:E}),Object(u.jsxs)("div",{className:"info",children:[j&&"Loading...",!j&&o&&Object(u.jsxs)(u.Fragment,{children:[null===o||void 0===o||null===(t=o.metadata)||void 0===t?void 0:t.title," by ",Object(u.jsx)("b",{children:null===o||void 0===o||null===(i=o.metadata)||void 0===i?void 0:i.artist})]})]})]})]})};d.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(v,{})}),document.getElementById("root"))},9:function(t,i,e){}},[[11,1,2]]]);
//# sourceMappingURL=main.b899e050.chunk.js.map