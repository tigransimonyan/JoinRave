(this.webpackJsonpjoinrave=this.webpackJsonpjoinrave||[]).push([[0],{11:function(t,i,e){"use strict";e.r(i);var n=e(1),s=e.n(n),o=e(4),a=e.n(o),d=(e(9),e(2)),c=e.p+"static/media/play.67fb6362.svg",r=e.p+"static/media/pause.12407eb8.svg",h=function(){window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var t,i=90,e=2265,n=1465,s=e/i,o=n/i,a=5e-4,d=.01,c=0,r=0,h=0,u=!1,l=function(){this.x=0,this.y=0,this.vx=0,this.vy=0,this.ind_x=0,this.ind_y=0};function m(t,i,e,n){y.moveTo(t.x,t.y),y.lineTo(i.x,i.y),y.moveTo(t.x,t.y),y.lineTo(n.x,n.y),88==t.ind_x&&(y.moveTo(e.x,e.y),y.lineTo(n.x,n.y)),88==t.ind_y&&(y.moveTo(e.x,e.y),y.lineTo(i.x,i.y))}function v(){y.fillStyle="hsla(0, 5%, 5%, .1)",y.fillRect(0,0,e,n),function(){for(var e=0;e<i;e++)for(var n=0;n<i;n++)t[e][n].frame()}(),function(){y.strokeStyle="hsla("+c%360+",100%,50%,1)",y.beginPath(),c-=.5;for(var i=0;i<89;i+=1)for(var e=0;e<89;e+=1)m(t[i][e],t[i][e+1],t[i+1][e+1],t[i+1][e]);y.stroke()}()}l.prototype.frame=function(){if(0!=this.ind_x&&89!=this.ind_x&&0!=this.ind_y&&89!=this.ind_y){var i=0,e=0,n=this.ind_x*s-this.x,c=this.ind_y*o-this.y;if(i=a*n,e=a*c,i-=d*(this.x-t[this.ind_x-1][this.ind_y].x),e-=d*(this.y-t[this.ind_x-1][this.ind_y].y),i-=d*(this.x-t[this.ind_x+1][this.ind_y].x),e-=d*(this.y-t[this.ind_x+1][this.ind_y].y),i-=d*(this.x-t[this.ind_x][this.ind_y-1].x),e-=d*(this.y-t[this.ind_x][this.ind_y-1].y),i-=d*(this.x-t[this.ind_x][this.ind_y+1].x),e-=d*(this.y-t[this.ind_x][this.ind_y+1].y),this.vx+=i-.02*this.vx,this.vy+=e-.02*this.vy,this.x+=.98*this.vx,this.y+=.98*this.vy,u){var l=this.x-r,m=this.y-h,v=Math.sqrt(l*l+m*m);v<50&&(v=v<10?10:v,this.x-=l/v*5,this.y-=m/v*5)}}};var y,f=document.getElementById("canv");function x(t){u=!0}function j(t){u=!1}function w(t){var i=t.target.getBoundingClientRect();r=t.clientX-i.left,h=t.clientY-i.top}(y=f.getContext("2d")).fillStyle="hsla(0, 5%, 5%, .1)",y.fillRect(0,0,e,n),window.requestAnimFrame((function(){t=[];for(var e=0;e<i;e++){t.push([]);for(var n=0;n<i;n++){var a=new l;a.ind_x=e,a.ind_y=n,a.x=e*s,a.y=n*o,t[e][n]=a}}})),document.addEventListener("mousemove",w,!1),document.addEventListener("mousedown",x,!1),document.addEventListener("mouseup",j,!1),document.addEventListener("touchstart",x,!1),document.addEventListener("touchmove",w,!1),document.addEventListener("touchend",j,!1),function t(){window.requestAnimFrame(v),window.requestAnimFrame(t,33)}(),f.width<window.innerWidth&&(f.width=window.innerWidth),f.height<window.innerHeight&&(f.height=window.innerHeight)},u=e(0),l=new Audio;var m=function(){var t,i,e=Object(n.useState)(null),s=Object(d.a)(e,2),o=s[0],a=s[1],m=Object(n.useState)(!1),v=Object(d.a)(m,2),y=v[0],f=v[1],x=Object(n.useState)(!1),j=Object(d.a)(x,2),w=j[0],b=j[1],_=Object(n.useState)(!1),O=Object(d.a)(_,2),p=O[0],g=O[1],E=Object(n.useCallback)((function(){b(!0),fetch("https://api.joinrave.com/current").then((function(t){return t.json()})).then((function(t){a(t),l.src=t.metadata.file,l.load()})).catch((function(){b(!1)}))}),[]),L=Object(n.useCallback)((function(){p||g(!0)}),[p]);return Object(n.useEffect)((function(){p&&o&&(l.currentTime=o.time,l.play(),f(!0),b(!1))}),[p,o]),Object(n.useEffect)((function(){return l.addEventListener("ended",E),l.addEventListener("canplay",L),function(){l.removeEventListener("ended",E),l.removeEventListener("canplay",L)}}),[E,L]),Object(n.useLayoutEffect)((function(){try{h()}catch(t){console.log(t)}}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("canvas",{id:"canv",width:"2265",height:"1465"}),Object(u.jsxs)("div",{className:"app",children:[y?Object(u.jsx)("img",{alt:"Pause",src:r,onClick:function(){l.pause(),f(!1),g(!1)}}):Object(u.jsx)("img",{alt:"Play",src:c,onClick:E}),Object(u.jsxs)("div",{className:"info",children:[w&&"Loading...",!w&&o&&Object(u.jsxs)(u.Fragment,{children:[null===o||void 0===o||null===(t=o.metadata)||void 0===t?void 0:t.title," by ",Object(u.jsx)("b",{children:null===o||void 0===o||null===(i=o.metadata)||void 0===i?void 0:i.artist})]})]})]})]})};a.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(m,{})}),document.getElementById("root"))},9:function(t,i,e){}},[[11,1,2]]]);
//# sourceMappingURL=main.8fc9f2dd.chunk.js.map