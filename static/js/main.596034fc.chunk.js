(this.webpackJsonpjoinrave=this.webpackJsonpjoinrave||[]).push([[0],{11:function(t,e,i){"use strict";i.r(e);var n=i(0),s=i.n(n),a=i(4),o=i.n(a),c=(i(9),i(2)),d=i.p+"static/media/play.67fb6362.svg",r=i.p+"static/media/pause.12407eb8.svg",u=function(){window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var t,e=90,i=2265,n=1465,s=i/e,a=n/e,o=5e-4,c=.01,d=0,r=0,u=0,h=!1,l=function(){this.x=0,this.y=0,this.vx=0,this.vy=0,this.ind_x=0,this.ind_y=0};function v(t,e,i,n){y.moveTo(t.x,t.y),y.lineTo(e.x,e.y),y.moveTo(t.x,t.y),y.lineTo(n.x,n.y),88==t.ind_x&&(y.moveTo(i.x,i.y),y.lineTo(n.x,n.y)),88==t.ind_y&&(y.moveTo(i.x,i.y),y.lineTo(e.x,e.y))}function m(){y.fillStyle="hsla(0, 5%, 5%, .1)",y.fillRect(0,0,i,n),function(){for(var i=0;i<e;i++)for(var n=0;n<e;n++)t[i][n].frame()}(),function(){y.strokeStyle="hsla("+d%360+",100%,50%,1)",y.beginPath(),d-=.5;for(var e=0;e<89;e+=1)for(var i=0;i<89;i+=1)v(t[e][i],t[e][i+1],t[e+1][i+1],t[e+1][i]);y.stroke()}()}l.prototype.frame=function(){if(0!=this.ind_x&&89!=this.ind_x&&0!=this.ind_y&&89!=this.ind_y){var e=0,i=0,n=this.ind_x*s-this.x,d=this.ind_y*a-this.y;if(e=o*n,i=o*d,e-=c*(this.x-t[this.ind_x-1][this.ind_y].x),i-=c*(this.y-t[this.ind_x-1][this.ind_y].y),e-=c*(this.x-t[this.ind_x+1][this.ind_y].x),i-=c*(this.y-t[this.ind_x+1][this.ind_y].y),e-=c*(this.x-t[this.ind_x][this.ind_y-1].x),i-=c*(this.y-t[this.ind_x][this.ind_y-1].y),e-=c*(this.x-t[this.ind_x][this.ind_y+1].x),i-=c*(this.y-t[this.ind_x][this.ind_y+1].y),this.vx+=e-.02*this.vx,this.vy+=i-.02*this.vy,this.x+=.98*this.vx,this.y+=.98*this.vy,h){var l=this.x-r,v=this.y-u,m=Math.sqrt(l*l+v*v);m<50&&(m=m<10?10:m,this.x-=l/m*5,this.y-=v/m*5)}}};var y,f=document.getElementById("canv");function x(t){h=!0}function b(t){h=!1}function j(t){var e=t.target.getBoundingClientRect();r=t.clientX-e.left,u=t.clientY-e.top}(y=f.getContext("2d")).fillStyle="hsla(0, 5%, 5%, .1)",y.fillRect(0,0,i,n),window.requestAnimFrame((function(){t=[];for(var i=0;i<e;i++){t.push([]);for(var n=0;n<e;n++){var o=new l;o.ind_x=i,o.ind_y=n,o.x=i*s,o.y=n*a,t[i][n]=o}}})),document.addEventListener("mousemove",j,!1),document.addEventListener("mousedown",x,!1),document.addEventListener("mouseup",b,!1),document.addEventListener("touchstart",x,!1),document.addEventListener("touchmove",j,!1),document.addEventListener("touchend",b,!1),function t(){window.requestAnimFrame(m),window.requestAnimFrame(t,33)}(),f.width<window.innerWidth&&(f.width=window.innerWidth),f.height<window.innerHeight&&(f.height=window.innerHeight)},h=i(1),l=new Audio;var v=function(){var t,e,i=Object(n.useState)(null),s=Object(c.a)(i,2),a=s[0],o=s[1],v=Object(n.useState)(!1),m=Object(c.a)(v,2),y=m[0],f=m[1],x=Object(n.useState)(!1),b=Object(c.a)(x,2),j=b[0],w=b[1],p=Object(n.useState)(!1),_=Object(c.a)(p,2),O=_[0],g=_[1],E=Object(n.useCallback)((function(){w(!0),fetch("https://api.joinrave.com/current").then((function(t){return t.json()})).then((function(t){o(t);var e=t.metadata.file;e!==l.src&&(l.src=e,l.load(),g(!1))})).catch((function(){w(!1)}))}),[]),L=Object(n.useCallback)((function(){l.pause(),f(!1)}),[]),k=Object(n.useCallback)((function(){O||g(!0)}),[O]),q=Object(n.useCallback)((function(){y||E()}),[y,E]),A=Object(n.useCallback)((function(){return E()}),[E]),C=Object(n.useCallback)((function(){return L()}),[L]);return Object(n.useEffect)((function(){O&&a&&(l.currentTime=a.time,l.play(),f(!0),w(!1))}),[O,a]),Object(n.useEffect)((function(){return l.addEventListener("play",q),l.addEventListener("ended",A),l.addEventListener("pause",C),l.addEventListener("canplay",k),function(){l.removeEventListener("play",q),l.removeEventListener("ended",A),l.removeEventListener("pause",C),l.removeEventListener("canplay",k)}}),[q,k,A,C]),Object(n.useLayoutEffect)((function(){try{u()}catch(t){console.log(t)}}),[]),Object(h.jsxs)("div",{id:"main",children:[Object(h.jsx)("canvas",{id:"canv",width:"2265",height:"1465"}),Object(h.jsxs)("div",{className:"app",children:[y?Object(h.jsx)("img",{class:"pause",alt:"Pause",src:r,onClick:L}):Object(h.jsx)("img",{class:"play",alt:"Play",src:d,onClick:E}),Object(h.jsxs)("div",{className:"info",children:[j&&"Playing...",!j&&(null===a||void 0===a?void 0:a.metadata)&&Object(h.jsxs)(h.Fragment,{children:[null===a||void 0===a||null===(t=a.metadata)||void 0===t?void 0:t.title," by ",Object(h.jsx)("b",{children:null===a||void 0===a||null===(e=a.metadata)||void 0===e?void 0:e.artist})]})]})]})]})};o.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root"))},9:function(t,e,i){}},[[11,1,2]]]);
//# sourceMappingURL=main.596034fc.chunk.js.map