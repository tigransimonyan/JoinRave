(this.webpackJsonpjoinrave=this.webpackJsonpjoinrave||[]).push([[0],{11:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),a=n(4),o=n.n(a),c=(n(9),n(2)),s=n.p+"static/media/play.67fb6362.svg",d=n.p+"static/media/pause.12407eb8.svg",u=function(e){var t=new window.SimplexNoise;!function(){var n=new AudioContext,i=n.createMediaElementSource(e),r=n.createAnalyser();i.connect(r),r.connect(n.destination),r.fftSize=512;var a=r.frequencyBinCount,o=new Uint8Array(a),c=new window.window.THREE.Scene,s=new window.THREE.Group,d=new window.THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3);d.position.set(0,0,100),d.lookAt(c.position),c.add(d);var u=new window.THREE.WebGLRenderer({alpha:!0,antialias:!0});u.setSize(window.innerWidth,window.innerHeight);var h=new window.THREE.PlaneGeometry(800,800,20,20),v=new window.THREE.MeshLambertMaterial({color:6882510,side:window.THREE.DoubleSide,wireframe:!0}),p=new window.THREE.Mesh(h,v);p.rotation.x=-.5*Math.PI,p.position.set(0,30,0),s.add(p);var E=new window.THREE.Mesh(h,v);E.rotation.x=-.5*Math.PI,E.position.set(0,-30,0),s.add(E);var j=new window.THREE.IcosahedronGeometry(10,4),b=new window.THREE.MeshLambertMaterial({color:16711918,wireframe:!0}),f=new window.THREE.Mesh(j,b);f.position.set(0,0,0),s.add(f);var g=new window.THREE.AmbientLight(11184810);c.add(g);var y=new window.THREE.SpotLight(16777215);function O(e,n){e.geometry.vertices.forEach((function(e,i){var r=Date.now(),a=(t.noise2D(e.x+3e-4*r,e.y+1e-4*r)+0)*n*2;e.z=a})),e.geometry.verticesNeedUpdate=!0,e.geometry.normalsNeedUpdate=!0,e.geometry.computeVertexNormals(),e.geometry.computeFaceNormals()}y.intensity=.9,y.position.set(-10,40,20),y.lookAt(f),y.castShadow=!0,c.add(y),c.add(s),document.getElementById("out").appendChild(u.domElement),window.addEventListener("resize",(function(){d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)}),!1),function e(){r.getByteFrequencyData(o);var n=o.slice(0,o.length/2-1),i=o.slice(o.length/2-1,o.length-1),a=(l(o),m(n)),h=l(n),v=m(i),j=l(i),b=a/n.length,g=(n.length,i.length,j/i.length);O(p,w(g,0,1,.5,4)),O(E,w(b,0,1,.5,4)),y=f,x=w(Math.pow(b,.8),0,1,0,8),H=w(g,0,1,0,4),y.geometry.vertices.forEach((function(e,n){var i=y.geometry.parameters.radius,r=7,a=window.performance.now();e.normalize();var o=1e-5,c=i+x+t.noise3D(e.x+a*o*7,e.y+a*o*8,e.z+a*o*9)*r*H;e.multiplyScalar(c)})),y.geometry.verticesNeedUpdate=!0,y.geometry.normalsNeedUpdate=!0,y.geometry.computeVertexNormals(),y.geometry.computeFaceNormals(),s.rotation.y+=.005,u.render(c,d),requestAnimationFrame(e);var y,x,H}()}()};function w(e,t,n,i,r){return i+function(e,t,n){return(e-t)/(n-t)}(e,t,n)*(r-i)}function l(e){return e.reduce((function(e,t){return e+t}))/e.length}function m(e){return e.reduce((function(e,t){return Math.max(e,t)}))}var h=n(0),v=new Audio;var p=function(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(!1),o=Object(c.a)(a,2),w=o[0],l=o[1],m=Object(i.useState)(!1),p=Object(c.a)(m,2),E=p[0],j=p[1];Object(i.useEffect)((function(){v.crossOrigin="anonymous",v.src="https://radio.joinrave.com/stream",v.load()}),[]);var b=Object(i.useCallback)((function(){w&&!n&&(v.play(),r(!0))}),[w,n]),f=Object(i.useCallback)((function(){n&&(v.pause(),r(!1))}),[n]),g=Object(i.useCallback)((function(){w||l(!0)}),[w]),y=Object(i.useCallback)((function(){return b()}),[b]),O=Object(i.useCallback)((function(){return f()}),[f]),x=function(){j(!0)};return Object(i.useEffect)((function(){return v.addEventListener("play",y),v.addEventListener("pause",O),v.addEventListener("canplay",g),v.addEventListener("error",x),function(){v.removeEventListener("play",y),v.removeEventListener("pause",O),v.removeEventListener("canplay",g),v.removeEventListener("error",x)}}),[y,g,x,O]),Object(i.useLayoutEffect)((function(){try{u(v)}catch(e){console.log(e)}}),[]),Object(h.jsxs)("div",{id:"main",children:[Object(h.jsx)("canvas",{id:"canv",width:"100%",height:"100%"}),Object(h.jsx)("div",{id:"out"}),Object(h.jsxs)("div",{className:"app",children:[n?Object(h.jsx)("img",{className:"pause",alt:"Pause",src:d,onClick:f}):Object(h.jsx)("img",{className:"play",alt:"Play",src:s,onClick:b}),Object(h.jsx)("div",{className:"info",children:E?Object(h.jsxs)(h.Fragment,{children:["No Live Stream ",Object(h.jsx)("b",{children:"Today"})]}):Object(h.jsxs)(h.Fragment,{children:["Live Stream from ",Object(h.jsx)("b",{children:"Earth"})]})})]})]})};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(p,{})}),document.getElementById("root"))},9:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.777dae47.chunk.js.map