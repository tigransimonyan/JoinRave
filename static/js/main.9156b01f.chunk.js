(this.webpackJsonpjoinrave=this.webpackJsonpjoinrave||[]).push([[0],{11:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(4),r=n.n(o),c=(n(9),n(3)),s=n.p+"static/media/play.67fb6362.svg",d=n.p+"static/media/pause.12407eb8.svg",u=new window.SimplexNoise;function w(e){var t=new AudioContext,n=t.createMediaElementSource(e),i=t.createAnalyser();n.connect(i),i.connect(t.destination),i.fftSize=512;var a=i.frequencyBinCount,o=new Uint8Array(a),r=new window.THREE.Scene,c=new window.THREE.Group,s=new window.THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3);s.position.set(0,0,100),s.lookAt(r.position),r.add(s);var d=new window.THREE.WebGLRenderer({alpha:!0,antialias:!0});d.setSize(window.innerWidth,window.innerHeight);var w=new window.THREE.PlaneGeometry(800,800,20,20),E=new window.THREE.MeshLambertMaterial({color:6882510,side:window.THREE.DoubleSide,wireframe:!0}),v=new window.THREE.Mesh(w,E);v.rotation.x=-.5*Math.PI,v.position.set(0,30,0),c.add(v);var h=new window.THREE.Mesh(w,E);h.rotation.x=-.5*Math.PI,h.position.set(0,-30,0),c.add(h);var f=new window.THREE.IcosahedronGeometry(10,4),b=new window.THREE.MeshLambertMaterial({color:16711918,wireframe:!0}),j=new window.THREE.Mesh(f,b);j.position.set(0,0,0),c.add(j);var y=new window.THREE.AmbientLight(11184810);r.add(y);var g=new window.THREE.SpotLight(16777215);function O(e,t){e.geometry.vertices.forEach((function(e,n){var i=Date.now(),a=(u.noise2D(e.x+3e-4*i,e.y+1e-4*i)+0)*t*2;e.z=a})),e.geometry.verticesNeedUpdate=!0,e.geometry.normalsNeedUpdate=!0,e.geometry.computeVertexNormals(),e.geometry.computeFaceNormals()}g.intensity=.9,g.position.set(-10,40,20),g.lookAt(j),g.castShadow=!0,r.add(g),r.add(c),document.getElementById("out").appendChild(d.domElement),window.addEventListener("resize",(function(){s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight)}),!1),function e(){i.getByteFrequencyData(o);var t=o.slice(0,o.length/2-1),n=o.slice(o.length/2-1,o.length-1),a=(m(o),p(t)),w=m(t),E=p(n),f=m(n),b=a/t.length,y=(t.length,n.length,f/n.length);O(v,l(y,0,1,.5,4)),O(h,l(b,0,1,.5,4)),g=j,x=l(Math.pow(b,.8),0,1,0,8),H=l(y,0,1,0,4),g.geometry.vertices.forEach((function(e,t){var n=g.geometry.parameters.radius,i=7,a=window.performance.now();e.normalize();var o=1e-5,r=n+x+u.noise3D(e.x+a*o*7,e.y+a*o*8,e.z+a*o*9)*i*H;e.multiplyScalar(r)})),g.geometry.verticesNeedUpdate=!0,g.geometry.normalsNeedUpdate=!0,g.geometry.computeVertexNormals(),g.geometry.computeFaceNormals(),c.rotation.y+=.005,d.render(r,s),requestAnimationFrame(e);var g,x,H}(),e.play()}function l(e,t,n,i,a){return i+function(e,t,n){return(e-t)/(n-t)}(e,t,n)*(a-i)}function m(e){return e.reduce((function(e,t){return e+t}))/e.length}function p(e){return e.reduce((function(e,t){return Math.max(e,t)}))}var E=n(1),v=new Audio;var h=function(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)(!1),r=Object(c.a)(o,2),u=r[0],l=r[1];Object(i.useEffect)((function(){v.src="https://radio.joinrave.com/stream",v.load()}),[]);var m=Object(i.useCallback)((function(){u&&(w(v),a(!0))}),[u]),p=Object(i.useCallback)((function(){v.pause(),a(!1)}),[]),h=Object(i.useCallback)((function(){u||l(!0)}),[u]),f=Object(i.useCallback)((function(){n||m()}),[n,m]),b=Object(i.useCallback)((function(){return m()}),[m]),j=Object(i.useCallback)((function(){return p()}),[p]);return Object(i.useEffect)((function(){return v.addEventListener("play",f),v.addEventListener("ended",b),v.addEventListener("pause",j),v.addEventListener("canplay",h),function(){v.removeEventListener("play",f),v.removeEventListener("ended",b),v.removeEventListener("pause",j),v.removeEventListener("canplay",h)}}),[f,h,b,j]),Object(i.useLayoutEffect)((function(){}),[]),Object(E.jsxs)("div",{id:"main",children:[Object(E.jsx)("div",{id:"out"}),Object(E.jsxs)("div",{className:"app",children:[n?Object(E.jsx)("img",{className:"pause",alt:"Pause",src:d,onClick:p}):Object(E.jsx)("img",{className:"play",alt:"Play",src:s,onClick:m}),Object(E.jsxs)("div",{className:"info",children:["Live Stream from ",Object(E.jsx)("b",{children:"Earth"})]})]})]})};r.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(h,{})}),document.getElementById("root"))},9:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.9156b01f.chunk.js.map