{"version":3,"sources":["assets/play.svg","assets/pause.svg","animation-4.js","App.js","index.js"],"names":["initAnimation","audio","noise","window","SimplexNoise","context","AudioContext","webkitAudioContext","analyser","createAnalyser","createMediaElementSource","connect","destination","fftSize","dataArray","Uint8Array","frequencyBinCount","scene","THREE","Scene","group","Group","camera","PerspectiveCamera","innerWidth","innerHeight","position","set","lookAt","add","renderer","WebGLRenderer","alpha","antialias","setSize","planeGeometry","PlaneGeometry","planeMaterial","MeshLambertMaterial","color","side","DoubleSide","wireframe","plane","Mesh","rotation","x","Math","PI","plane2","icosahedronGeometry","IcosahedronGeometry","lambertMaterial","ball","ambientLight","AmbientLight","spotLight","SpotLight","makeRoughGround","mesh","distortionFr","geometry","vertices","forEach","vertex","i","time","Date","now","distance","noise2D","y","z","verticesNeedUpdate","normalsNeedUpdate","computeVertexNormals","computeFaceNormals","intensity","castShadow","document","getElementById","appendChild","domElement","addEventListener","aspect","updateProjectionMatrix","render","getByteFrequencyData","bassFr","treFr","lowerHalfArray","slice","length","upperHalfArray","lowerMax","avg","max","upperAvg","lowerMaxFr","upperAvgFr","modulate","pow","offset","parameters","radius","amp","performance","normalize","rf","noise3D","multiplyScalar","requestAnimationFrame","play","val","minVal","maxVal","outMin","outMax","fractionate","arr","reduce","sum","b","a","Audio","App","useState","playing","setPlaying","canplay","setCanplay","error","setError","useEffect","crossOrigin","src","process","load","e","console","log","useCallback","pause","onCanplay","onPlay","onPause","onError","removeEventListener","id","width","height","className","alt","PauseIcon","onClick","PlayIcon","ReactDOM","StrictMode"],"mappings":"8JAAe,MAA0B,iCCA1B,MAA0B,kCCArCA,EAAgB,SAAUC,GAC5B,IAAIC,EAAQ,IAAIC,OAAOC,cACvB,WACE,IAAIC,EAAU,IAAKF,OAAOG,cAAgBH,OAAOI,oBAC7CC,EAAWH,EAAQI,iBACbJ,EAAQK,yBAAyBT,GACvCU,QAAQH,GACZA,EAASG,QAAQN,EAAQO,aACzBJ,EAASK,QAAU,IACnB,IAAIC,EAAY,IAAIC,WAAWP,EAASQ,mBACpCC,EAAQ,IAAId,OAAOA,OAAOe,MAAMC,MAChCC,EAAQ,IAAIjB,OAAOe,MAAMG,MACzBC,EAAS,IAAInB,OAAOe,MAAMK,kBAC5B,GACApB,OAAOqB,WAAarB,OAAOsB,YAC3B,GACA,KAEFH,EAAOI,SAASC,IAAI,EAAG,EAAG,KAC1BL,EAAOM,OAAOX,EAAMS,UACpBT,EAAMY,IAAIP,GAEV,IAAIQ,EAAW,IAAI3B,OAAOe,MAAMa,cAAc,CAAEC,OAAO,EAAMC,WAAW,IACxEH,EAASI,QAAQ/B,OAAOqB,WAAYrB,OAAOsB,aAE3C,IAAIU,EAAgB,IAAIhC,OAAOe,MAAMkB,cAAc,IAAK,IAAK,GAAI,IAC7DC,EAAgB,IAAIlC,OAAOe,MAAMoB,oBAAoB,CACvDC,MAAO,QACPC,KAAMrC,OAAOe,MAAMuB,WACnBC,WAAW,IAGTC,EAAQ,IAAIxC,OAAOe,MAAM0B,KAAKT,EAAeE,GACjDM,EAAME,SAASC,GAAK,GAAMC,KAAKC,GAC/BL,EAAMjB,SAASC,IAAI,EAAG,GAAI,GAC1BP,EAAMS,IAAIc,GAEV,IAAIM,EAAS,IAAI9C,OAAOe,MAAM0B,KAAKT,EAAeE,GAClDY,EAAOJ,SAASC,GAAK,GAAMC,KAAKC,GAChCC,EAAOvB,SAASC,IAAI,GAAI,GAAI,GAC5BP,EAAMS,IAAIoB,GAEV,IAAIC,EAAsB,IAAI/C,OAAOe,MAAMiC,oBAAoB,GAAI,GAC/DC,EAAkB,IAAIjD,OAAOe,MAAMoB,oBAAoB,CACzDC,MAAO,SACPG,WAAW,IAGTW,EAAO,IAAIlD,OAAOe,MAAM0B,KAAKM,EAAqBE,GACtDC,EAAK3B,SAASC,IAAI,EAAG,EAAG,GACxBP,EAAMS,IAAIwB,GAEV,IAAIC,EAAe,IAAInD,OAAOe,MAAMqC,aAAa,UACjDtC,EAAMY,IAAIyB,GAEV,IAAIE,EAAY,IAAIrD,OAAOe,MAAMuC,UAAU,UA6E3C,SAASC,EAAgBC,EAAMC,GAC7BD,EAAKE,SAASC,SAASC,SAAQ,SAAUC,EAAQC,GAC/C,IACIC,EAAOC,KAAKC,MACZC,GACDnE,EAAMoE,QAAQN,EAAOlB,EAAW,KAAPoB,EAAeF,EAAOO,EAAW,KAAPL,GAAiB,GACrEN,EAJQ,EAMVI,EAAOQ,EAAIH,KAEbV,EAAKE,SAASY,oBAAqB,EACnCd,EAAKE,SAASa,mBAAoB,EAClCf,EAAKE,SAASc,uBACdhB,EAAKE,SAASe,qBAzFhBpB,EAAUqB,UAAY,GACtBrB,EAAU9B,SAASC,KAAK,GAAI,GAAI,IAChC6B,EAAU5B,OAAOyB,GACjBG,EAAUsB,YAAa,EACvB7D,EAAMY,IAAI2B,GAEVvC,EAAMY,IAAIT,GAEV2D,SAASC,eAAe,OAAOC,YAAYnD,EAASoD,YAEpD/E,OAAOgF,iBAAiB,UAmCxB,WACE7D,EAAO8D,OAASjF,OAAOqB,WAAarB,OAAOsB,YAC3CH,EAAO+D,yBACPvD,EAASI,QAAQ/B,OAAOqB,WAAYrB,OAAOsB,gBAtCK,GAElD,SAAS6D,IACP9E,EAAS+E,qBAAqBzE,GAE9B,IAoCqB6C,EAAM6B,EAAQC,EApC/BC,EAAiB5E,EAAU6E,MAAM,EAAG7E,EAAU8E,OAAS,EAAI,GAC3DC,EAAiB/E,EAAU6E,MAAM7E,EAAU8E,OAAS,EAAI,EAAG9E,EAAU8E,OAAS,GAG9EE,GADaC,EAAIjF,GACNkF,EAAIN,IAGfO,GAFWF,EAAIL,GACJM,EAAIH,GACJE,EAAIF,IAEfK,EAAaJ,EAAWJ,EAAeE,OAGvCO,GAFwBT,EAAeE,OACfC,EAAeD,OAC1BK,EAAWJ,EAAeD,QAE3ClC,EAAgBf,EAAOyD,EAASD,EAAY,EAAG,EAAG,GAAK,IACvDzC,EAAgBT,EAAQmD,EAASF,EAAY,EAAG,EAAG,GAAK,IAqBnCvC,EAlBnBN,EAkByBmC,EAjBzBY,EAASrD,KAAKsD,IAAIH,EAAY,IAAM,EAAG,EAAG,EAAG,GAiBZT,EAhBjCW,EAASD,EAAY,EAAG,EAAG,EAAG,GAiBhCxC,EAAKE,SAASC,SAASC,SAAQ,SAAUC,EAAQC,GAC/C,IAAIqC,EAAS3C,EAAKE,SAAS0C,WAAWC,OAClCC,EAAM,EACNvC,EAAO/D,OAAOuG,YAAYtC,MAC9BJ,EAAO2C,YACP,IAAIC,EAAK,KACLvC,EACFiC,EACAd,EACAtF,EAAM2G,QACJ7C,EAAOlB,EAAIoB,EAAO0C,EAAK,EACvB5C,EAAOO,EAAIL,EAAO0C,EAAK,EACvB5C,EAAOQ,EAAIN,EAAO0C,EAAK,GAEvBH,EACAhB,EACJzB,EAAO8C,eAAezC,MAExBV,EAAKE,SAASY,oBAAqB,EACnCd,EAAKE,SAASa,mBAAoB,EAClCf,EAAKE,SAASc,uBACdhB,EAAKE,SAASe,qBAnCdxD,EAAMyB,SAAS0B,GAAK,KACpBzC,EAASwD,OAAOrE,EAAOK,GACvByF,sBAAsBzB,GAGxBA,GAkDF0B,IAOF,SAASZ,EAASa,EAAKC,EAAQC,EAAQC,EAAQC,GAG7C,OAAOD,EAPT,SAAqBH,EAAKC,EAAQC,GAChC,OAAQF,EAAMC,IAAWC,EAASD,GAIzBI,CAAYL,EAAKC,EAAQC,IACtBE,EAASD,GAIvB,SAASrB,EAAIwB,GAIX,OAHYA,EAAIC,QAAO,SAAUC,EAAKC,GACpC,OAAOD,EAAMC,KAEAH,EAAI3B,OAGrB,SAASI,EAAIuB,GACX,OAAOA,EAAIC,QAAO,SAAUG,EAAGD,GAC7B,OAAO3E,KAAKiD,IAAI2B,EAAGD,M,WCnKjBzH,EAAQ,IAAI2H,MAyFHC,MAvFf,WAAgB,IAAD,EACiBC,oBAAS,GAD1B,mBACNC,EADM,KACGC,EADH,OAEiBF,oBAAS,GAF1B,mBAENG,EAFM,KAEGC,EAFH,OAGaJ,oBAAS,GAHtB,mBAGNK,EAHM,KAGCC,EAHD,KAKbC,qBAAU,WACRpI,EAAMqI,YAAc,YACpBrI,EAAMsI,IAAMC,oCACZvI,EAAMwI,OACN,IACEzI,EAAcC,GACd,MAAOyI,GACPC,QAAQC,IAAIF,MAEb,IAEH,IAAM1B,EAAO6B,uBAAY,WACnBZ,IAAYF,IACd9H,EAAM+G,OACNgB,GAAW,MAEZ,CAACC,EAASF,IAEPe,EAAQD,uBAAY,WACpBd,IACF9H,EAAM6I,QACNd,GAAW,MAEZ,CAACD,IAEEgB,EAAYF,uBAAY,WACvBZ,GACHC,GAAW,KAEZ,CAACD,IAEEe,EAASH,uBAAY,kBAAM7B,MAAQ,CAACA,IAEpCiC,EAAUJ,uBAAY,kBAAMC,MAAS,CAACA,IAEtCI,EAAUL,uBAAY,WAC1BT,GAAS,KACR,IAiBH,OAfAC,qBAAU,WAMR,OALApI,EAAMkF,iBAAiB,OAAQ6D,GAE/B/I,EAAMkF,iBAAiB,QAAS8D,GAChChJ,EAAMkF,iBAAiB,UAAW4D,GAClC9I,EAAMkF,iBAAiB,QAAS+D,GACzB,WACLjJ,EAAMkJ,oBAAoB,OAAQH,GAElC/I,EAAMkJ,oBAAoB,QAASF,GACnChJ,EAAMkJ,oBAAoB,UAAWJ,GACrC9I,EAAMkJ,oBAAoB,QAASD,MAEpC,CAACF,EAAQD,EAAWG,EAASD,IAG9B,sBAAKG,GAAG,OAAR,UACE,wBAAQA,GAAG,OAAOC,MAAM,OAAOC,OAAO,SACtC,qBAAKF,GAAG,QACR,sBAAKG,UAAU,MAAf,UACItB,GAAYE,EAEVJ,EACF,qBAAKwB,UAAU,QAAQC,IAAI,QAAQjB,IAAKkB,EAAWC,QAASZ,IAE5D,qBAAKS,UAAU,OAAOC,IAAI,OAAOjB,IAAKoB,EAAUD,QAAS1C,IAJzD,qBAAKuC,UAAU,YAMjB,qBAAKA,UAAU,OAAf,SACGpB,EACC,uDACiB,yCAGjB,yDACmB,kDCnF/ByB,IAAStE,OACP,cAAC,IAAMuE,WAAP,UACE,cAAC,EAAD,MAEF9E,SAASC,eAAe,U","file":"static/js/main.f80d4fac.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/play.67fb6362.svg\";","export default __webpack_public_path__ + \"static/media/pause.12407eb8.svg\";","var initAnimation = function (audio) {\n  var noise = new window.SimplexNoise();\n  function play() {\n    var context = new (window.AudioContext || window.webkitAudioContext)();\n    var analyser = context.createAnalyser();\n    var src = context.createMediaElementSource(audio);\n    src.connect(analyser);\n    analyser.connect(context.destination);\n    analyser.fftSize = 512;\n    var dataArray = new Uint8Array(analyser.frequencyBinCount);\n    var scene = new window.window.THREE.Scene();\n    var group = new window.THREE.Group();\n    var camera = new window.THREE.PerspectiveCamera(\n      45,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    camera.position.set(0, 0, 100);\n    camera.lookAt(scene.position);\n    scene.add(camera);\n\n    var renderer = new window.THREE.WebGLRenderer({ alpha: true, antialias: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n\n    var planeGeometry = new window.THREE.PlaneGeometry(800, 800, 20, 20);\n    var planeMaterial = new window.THREE.MeshLambertMaterial({\n      color: 0x6904ce,\n      side: window.THREE.DoubleSide,\n      wireframe: true,\n    });\n\n    var plane = new window.THREE.Mesh(planeGeometry, planeMaterial);\n    plane.rotation.x = -0.5 * Math.PI;\n    plane.position.set(0, 30, 0);\n    group.add(plane);\n\n    var plane2 = new window.THREE.Mesh(planeGeometry, planeMaterial);\n    plane2.rotation.x = -0.5 * Math.PI;\n    plane2.position.set(0, -30, 0);\n    group.add(plane2);\n\n    var icosahedronGeometry = new window.THREE.IcosahedronGeometry(10, 4);\n    var lambertMaterial = new window.THREE.MeshLambertMaterial({\n      color: 0xff00ee,\n      wireframe: true,\n    });\n\n    var ball = new window.THREE.Mesh(icosahedronGeometry, lambertMaterial);\n    ball.position.set(0, 0, 0);\n    group.add(ball);\n\n    var ambientLight = new window.THREE.AmbientLight(0xaaaaaa);\n    scene.add(ambientLight);\n\n    var spotLight = new window.THREE.SpotLight(0xffffff);\n    spotLight.intensity = 0.9;\n    spotLight.position.set(-10, 40, 20);\n    spotLight.lookAt(ball);\n    spotLight.castShadow = true;\n    scene.add(spotLight);\n\n    scene.add(group);\n\n    document.getElementById('out').appendChild(renderer.domElement);\n\n    window.addEventListener('resize', onWindowResize, false);\n\n    function render() {\n      analyser.getByteFrequencyData(dataArray);\n\n      var lowerHalfArray = dataArray.slice(0, dataArray.length / 2 - 1);\n      var upperHalfArray = dataArray.slice(dataArray.length / 2 - 1, dataArray.length - 1);\n\n      var overallAvg = avg(dataArray);\n      var lowerMax = max(lowerHalfArray);\n      var lowerAvg = avg(lowerHalfArray);\n      var upperMax = max(upperHalfArray);\n      var upperAvg = avg(upperHalfArray);\n\n      var lowerMaxFr = lowerMax / lowerHalfArray.length;\n      var lowerAvgFr = lowerAvg / lowerHalfArray.length;\n      var upperMaxFr = upperMax / upperHalfArray.length;\n      var upperAvgFr = upperAvg / upperHalfArray.length;\n\n      makeRoughGround(plane, modulate(upperAvgFr, 0, 1, 0.5, 4));\n      makeRoughGround(plane2, modulate(lowerMaxFr, 0, 1, 0.5, 4));\n\n      makeRoughBall(\n        ball,\n        modulate(Math.pow(lowerMaxFr, 0.8), 0, 1, 0, 8),\n        modulate(upperAvgFr, 0, 1, 0, 4)\n      );\n\n      group.rotation.y += 0.005;\n      renderer.render(scene, camera);\n      requestAnimationFrame(render);\n    }\n\n    render();\n\n    function onWindowResize() {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    }\n\n    function makeRoughBall(mesh, bassFr, treFr) {\n      mesh.geometry.vertices.forEach(function (vertex, i) {\n        var offset = mesh.geometry.parameters.radius;\n        var amp = 7;\n        var time = window.performance.now();\n        vertex.normalize();\n        var rf = 0.00001;\n        var distance =\n          offset +\n          bassFr +\n          noise.noise3D(\n            vertex.x + time * rf * 7,\n            vertex.y + time * rf * 8,\n            vertex.z + time * rf * 9\n          ) *\n            amp *\n            treFr;\n        vertex.multiplyScalar(distance);\n      });\n      mesh.geometry.verticesNeedUpdate = true;\n      mesh.geometry.normalsNeedUpdate = true;\n      mesh.geometry.computeVertexNormals();\n      mesh.geometry.computeFaceNormals();\n    }\n\n    function makeRoughGround(mesh, distortionFr) {\n      mesh.geometry.vertices.forEach(function (vertex, i) {\n        var amp = 2;\n        var time = Date.now();\n        var distance =\n          (noise.noise2D(vertex.x + time * 0.0003, vertex.y + time * 0.0001) + 0) *\n          distortionFr *\n          amp;\n        vertex.z = distance;\n      });\n      mesh.geometry.verticesNeedUpdate = true;\n      mesh.geometry.normalsNeedUpdate = true;\n      mesh.geometry.computeVertexNormals();\n      mesh.geometry.computeFaceNormals();\n    }\n  }\n\n  play();\n};\n\nfunction fractionate(val, minVal, maxVal) {\n  return (val - minVal) / (maxVal - minVal);\n}\n\nfunction modulate(val, minVal, maxVal, outMin, outMax) {\n  var fr = fractionate(val, minVal, maxVal);\n  var delta = outMax - outMin;\n  return outMin + fr * delta;\n}\n\nfunction avg(arr) {\n  var total = arr.reduce(function (sum, b) {\n    return sum + b;\n  });\n  return total / arr.length;\n}\n\nfunction max(arr) {\n  return arr.reduce(function (a, b) {\n    return Math.max(a, b);\n  });\n}\n\nexport { initAnimation };\n","import { useEffect, useState, useCallback } from 'react';\nimport PlayIcon from './assets/play.svg';\nimport PauseIcon from './assets/pause.svg';\nimport { initAnimation } from './animation-4';\n// import FullScreenIcon from './assets/fullscreen.svg';\n// import NormalScreenIcon from './assets/normalscreen.svg';\n// import FavoriteIcon from './assets/favorite.svg';\n\nconst audio = new Audio();\n\nfunction App() {\n  const [playing, setPlaying] = useState(false);\n  const [canplay, setCanplay] = useState(false);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    audio.crossOrigin = 'anonymous';\n    audio.src = process.env.REACT_APP_API;\n    audio.load();\n    try {\n      initAnimation(audio);\n    } catch (e) {\n      console.log(e);\n    }\n  }, []);\n\n  const play = useCallback(() => {\n    if (canplay && !playing) {\n      audio.play();\n      setPlaying(true);\n    }\n  }, [canplay, playing]);\n\n  const pause = useCallback(() => {\n    if (playing) {\n      audio.pause();\n      setPlaying(false);\n    }\n  }, [playing]);\n\n  const onCanplay = useCallback(() => {\n    if (!canplay) {\n      setCanplay(true);\n    }\n  }, [canplay]);\n\n  const onPlay = useCallback(() => play(), [play]);\n  // const onEnded = useCallback(() => play(), [play]);\n  const onPause = useCallback(() => pause(), [pause]);\n\n  const onError = useCallback(() => {\n    setError(true);\n  }, []);\n\n  useEffect(() => {\n    audio.addEventListener('play', onPlay);\n    // audio.addEventListener('ended', onEnded);\n    audio.addEventListener('pause', onPause);\n    audio.addEventListener('canplay', onCanplay);\n    audio.addEventListener('error', onError);\n    return () => {\n      audio.removeEventListener('play', onPlay);\n      // audio.removeEventListener('ended', onEnded);\n      audio.removeEventListener('pause', onPause);\n      audio.removeEventListener('canplay', onCanplay);\n      audio.removeEventListener('error', onError);\n    };\n  }, [onPlay, onCanplay, onError, onPause]);\n\n  return (\n    <div id=\"main\">\n      <canvas id=\"canv\" width=\"100%\" height=\"100%\"></canvas>\n      <div id=\"out\"></div>\n      <div className=\"app\">\n        {!canplay && !error ? (\n          <div className=\"loading\" />\n        ) : playing ? (\n          <img className=\"pause\" alt=\"Pause\" src={PauseIcon} onClick={pause} />\n        ) : (\n          <img className=\"play\" alt=\"Play\" src={PlayIcon} onClick={play} />\n        )}\n        <div className=\"info\">\n          {error ? (\n            <>\n              No Live Stream <b>Today</b>\n            </>\n          ) : (\n            <>\n              Live Stream from <b>Earth</b>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}