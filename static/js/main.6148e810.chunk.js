(this.webpackJsonpjoinrave=this.webpackJsonpjoinrave||[]).push([[0],{11:function(t,e,i){"use strict";i.r(e);var n=i(0),s=i.n(n),o=i(4),a=i.n(o),c=(i(9),i(2)),d=i.p+"static/media/play.67fb6362.svg",r=i.p+"static/media/pause.12407eb8.svg",u=function(){window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var t,e=90,i=2265,n=1465,s=i/e,o=n/e,a=5e-4,c=.01,d=0,r=0,u=0,h=!1,l=function(){this.x=0,this.y=0,this.vx=0,this.vy=0,this.ind_x=0,this.ind_y=0};function v(t,e,i,n){m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.moveTo(t.x,t.y),m.lineTo(n.x,n.y),88==t.ind_x&&(m.moveTo(i.x,i.y),m.lineTo(n.x,n.y)),88==t.ind_y&&(m.moveTo(i.x,i.y),m.lineTo(e.x,e.y))}function y(){m.fillStyle="hsla(0, 5%, 5%, .1)",m.fillRect(0,0,i,n),function(){for(var i=0;i<e;i++)for(var n=0;n<e;n++)t[i][n].frame()}(),function(){m.strokeStyle="hsla("+d%360+",100%,50%,1)",m.beginPath(),d-=.5;for(var e=0;e<89;e+=1)for(var i=0;i<89;i+=1)v(t[e][i],t[e][i+1],t[e+1][i+1],t[e+1][i]);m.stroke()}()}l.prototype.frame=function(){if(0!=this.ind_x&&89!=this.ind_x&&0!=this.ind_y&&89!=this.ind_y){var e=0,i=0,n=this.ind_x*s-this.x,d=this.ind_y*o-this.y;if(e=a*n,i=a*d,e-=c*(this.x-t[this.ind_x-1][this.ind_y].x),i-=c*(this.y-t[this.ind_x-1][this.ind_y].y),e-=c*(this.x-t[this.ind_x+1][this.ind_y].x),i-=c*(this.y-t[this.ind_x+1][this.ind_y].y),e-=c*(this.x-t[this.ind_x][this.ind_y-1].x),i-=c*(this.y-t[this.ind_x][this.ind_y-1].y),e-=c*(this.x-t[this.ind_x][this.ind_y+1].x),i-=c*(this.y-t[this.ind_x][this.ind_y+1].y),this.vx+=e-.02*this.vx,this.vy+=i-.02*this.vy,this.x+=.98*this.vx,this.y+=.98*this.vy,h){var l=this.x-r,v=this.y-u,y=Math.sqrt(l*l+v*v);y<50&&(y=y<10?10:y,this.x-=l/y*5,this.y-=v/y*5)}}};var m,f=document.getElementById("canv");function x(t){h=!0}function b(t){h=!1}function j(t){var e=t.target.getBoundingClientRect();r=t.clientX-e.left,u=t.clientY-e.top}(m=f.getContext("2d")).fillStyle="hsla(0, 5%, 5%, .1)",m.fillRect(0,0,i,n),window.requestAnimFrame((function(){t=[];for(var i=0;i<e;i++){t.push([]);for(var n=0;n<e;n++){var a=new l;a.ind_x=i,a.ind_y=n,a.x=i*s,a.y=n*o,t[i][n]=a}}})),document.addEventListener("mousemove",j,!1),document.addEventListener("mousedown",x,!1),document.addEventListener("mouseup",b,!1),document.addEventListener("touchstart",x,!1),document.addEventListener("touchmove",j,!1),document.addEventListener("touchend",b,!1),function t(){window.requestAnimFrame(y),window.requestAnimFrame(t,33)}(),f.width<window.innerWidth&&(f.width=window.innerWidth),f.height<window.innerHeight&&(f.height=window.innerHeight)},h=i(1),l=new Audio;var v=function(){var t=Object(n.useState)(null),e=Object(c.a)(t,2),i=e[0],s=e[1],o=Object(n.useState)(!1),a=Object(c.a)(o,2),v=a[0],y=a[1],m=Object(n.useState)(!1),f=Object(c.a)(m,2),x=f[0],b=f[1],j=Object(n.useState)(!1),w=Object(c.a)(j,2),p=w[0],_=w[1],O=Object(n.useCallback)((function(){b(!0),fetch("https://api.joinrave.com/current").then((function(t){return t.json()})).then((function(t){s(t);var e=t.file;e!==l.src&&(l.src=e,l.load(),_(!1))})).catch((function(){b(!1)}))}),[]),g=Object(n.useCallback)((function(){l.pause(),y(!1)}),[]),E=Object(n.useCallback)((function(){p||_(!0)}),[p]),L=Object(n.useCallback)((function(){v||O()}),[v,O]),k=Object(n.useCallback)((function(){return O()}),[O]),q=Object(n.useCallback)((function(){return g()}),[g]);return Object(n.useEffect)((function(){p&&i&&(l.currentTime=i.time,l.play(),y(!0),b(!1))}),[p,i]),Object(n.useEffect)((function(){return l.addEventListener("play",L),l.addEventListener("ended",k),l.addEventListener("pause",q),l.addEventListener("canplay",E),function(){l.removeEventListener("play",L),l.removeEventListener("ended",k),l.removeEventListener("pause",q),l.removeEventListener("canplay",E)}}),[L,E,k,q]),Object(n.useLayoutEffect)((function(){try{u()}catch(t){console.log(t)}}),[]),Object(h.jsxs)("div",{id:"main",children:[Object(h.jsx)("canvas",{id:"canv",width:"100%",height:"100%"}),Object(h.jsxs)("div",{className:"app",children:[v?Object(h.jsx)("img",{class:"pause",alt:"Pause",src:r,onClick:g}):Object(h.jsx)("img",{class:"play",alt:"Play",src:d,onClick:O}),Object(h.jsxs)("div",{className:"info",children:[x&&"Playing...",!x&&i&&Object(h.jsxs)(h.Fragment,{children:[null===i||void 0===i?void 0:i.title," by ",Object(h.jsx)("b",{children:null===i||void 0===i?void 0:i.artist})]})]})]})]})};a.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root"))},9:function(t,e,i){}},[[11,1,2]]]);
//# sourceMappingURL=main.6148e810.chunk.js.map