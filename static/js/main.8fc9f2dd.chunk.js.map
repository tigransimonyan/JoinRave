{"version":3,"sources":["play.svg","pause.svg","animation.js","App.js","index.js"],"names":["startAnimation","window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","parts","gnum","_x","_y","w","h","P1","P2","ŭ","msX","msY","msdn","Part","this","x","y","vx","vy","ind_x","ind_y","draw_each","p1","p2","p3","p4","$","moveTo","lineTo","calls","fillStyle","fillRect","i","j","frame","mv_part","strokeStyle","beginPath","stroke","draw","prototype","ax","ay","off_dx","off_dy","dx","dy","ɋ","Math","sqrt","c","document","getElementById","MSDN","e","MSUP","MSMV","rect","target","getBoundingClientRect","clientX","left","clientY","top","getContext","push","p","addEventListener","run","width","innerWidth","height","innerHeight","audio","Audio","App","useState","track","setTrack","playing","setPlaying","loading","setLoading","canplay","setCanplay","play","useCallback","fetch","then","response","json","src","metadata","file","load","catch","onCanplay","useEffect","currentTime","time","removeEventListener","useLayoutEffect","console","log","id","className","alt","PauseIcon","onClick","pause","PlayIcon","title","artist","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.8fc9f2dd.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/play.67fb6362.svg\";","export default __webpack_public_path__ + \"static/media/pause.12407eb8.svg\";","const startAnimation = () => {\n  window.requestAnimFrame = (function (callback) {\n    return (\n      window.requestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.oRequestAnimationFrame ||\n      window.msRequestAnimationFrame ||\n      function (callback) {\n        window.setTimeout(callback, 1000 / 60);\n      }\n    );\n  })();\n\n  var gnum = 90; //num grids / frame\n  var _x = 2265; //x width (canvas width)\n  var _y = 1465; //y height (canvas height)\n  var w = _x / gnum; //grid sq width\n  var h = _y / gnum; //grid sq height\n  var $; //context\n  var parts; //particles\n  var frm = 0; //value from\n  var P1 = 0.0005; //point one\n  var P2 = 0.01; //point two\n  var n = 0.98; //n value for later\n  var n_vel = 0.02; //velocity\n  var ŭ = 0; //color update\n  var msX = 0; //mouse x\n  var msY = 0; //mouse y\n  var msdn = false; //mouse down flag\n\n  var Part = function () {\n    this.x = 0; //x pos\n    this.y = 0; //y pos\n    this.vx = 0; //velocity x\n    this.vy = 0; //velocity y\n    this.ind_x = 0; //index x\n    this.ind_y = 0; //index y\n  };\n\n  Part.prototype.frame = function () {\n    if (\n      this.ind_x == 0 ||\n      this.ind_x == gnum - 1 ||\n      this.ind_y == 0 ||\n      this.ind_y == gnum - 1\n    ) {\n      return;\n    }\n\n    var ax = 0; //angle x\n    var ay = 0; //angle y\n    //off_dx, off_dy = offset distance x, y\n    var off_dx = this.ind_x * w - this.x;\n    var off_dy = this.ind_y * h - this.y;\n    ax = P1 * off_dx;\n    ay = P1 * off_dy;\n\n    ax -= P2 * (this.x - parts[this.ind_x - 1][this.ind_y].x);\n    ay -= P2 * (this.y - parts[this.ind_x - 1][this.ind_y].y);\n\n    ax -= P2 * (this.x - parts[this.ind_x + 1][this.ind_y].x);\n    ay -= P2 * (this.y - parts[this.ind_x + 1][this.ind_y].y);\n\n    ax -= P2 * (this.x - parts[this.ind_x][this.ind_y - 1].x);\n    ay -= P2 * (this.y - parts[this.ind_x][this.ind_y - 1].y);\n\n    ax -= P2 * (this.x - parts[this.ind_x][this.ind_y + 1].x);\n    ay -= P2 * (this.y - parts[this.ind_x][this.ind_y + 1].y);\n\n    this.vx += ax - this.vx * n_vel;\n    this.vy += ay - this.vy * n_vel;\n\n    this.x += this.vx * n;\n    this.y += this.vy * n;\n    if (msdn) {\n      var dx = this.x - msX;\n      var dy = this.y - msY;\n      var ɋ = Math.sqrt(dx * dx + dy * dy);\n      if (ɋ < 50) {\n        ɋ = ɋ < 10 ? 10 : ɋ;\n        this.x -= (dx / ɋ) * 5;\n        this.y -= (dy / ɋ) * 5;\n      }\n    }\n  };\n\n  function go() {\n    parts = []; //particle array\n    for (var i = 0; i < gnum; i++) {\n      parts.push([]);\n      for (var j = 0; j < gnum; j++) {\n        var p = new Part();\n        p.ind_x = i;\n        p.ind_y = j;\n        p.x = i * w;\n        p.y = j * h;\n        parts[i][j] = p;\n      }\n    }\n  }\n  //move particles function\n  function mv_part() {\n    for (var i = 0; i < gnum; i++) {\n      for (var j = 0; j < gnum; j++) {\n        var p = parts[i][j];\n        p.frame();\n      }\n    }\n  }\n  //draw grid function\n  function draw() {\n    $.strokeStyle = \"hsla(\" + (ŭ % 360) + \",100%,50%,1)\";\n    $.beginPath();\n    ŭ -= 0.5;\n    for (var i = 0; i < gnum - 1; i += 1) {\n      for (var j = 0; j < gnum - 1; j += 1) {\n        var p1 = parts[i][j];\n        var p2 = parts[i][j + 1];\n        var p3 = parts[i + 1][j + 1];\n        var p4 = parts[i + 1][j];\n        draw_each(p1, p2, p3, p4);\n      }\n    }\n    $.stroke();\n  }\n  //draw each in array\n  function draw_each(p1, p2, p3, p4) {\n    $.moveTo(p1.x, p1.y);\n    $.lineTo(p2.x, p2.y);\n    $.moveTo(p1.x, p1.y);\n    $.lineTo(p4.x, p4.y);\n\n    if (p1.ind_x == gnum - 2) {\n      $.moveTo(p3.x, p3.y);\n      $.lineTo(p4.x, p4.y);\n    }\n    if (p1.ind_y == gnum - 2) {\n      $.moveTo(p3.x, p3.y);\n      $.lineTo(p2.x, p2.y);\n    }\n  }\n  //call functions to run\n  function calls() {\n    $.fillStyle = \"hsla(0, 5%, 5%, .1)\";\n    $.fillRect(0, 0, _x, _y);\n\n    mv_part();\n    draw();\n    frm++;\n  }\n\n  var c = document.getElementById(\"canv\");\n  var $ = c.getContext(\"2d\");\n  $.fillStyle = \"hsla(0, 5%, 5%, .1)\";\n  $.fillRect(0, 0, _x, _y);\n\n  function resize() {\n    if (c.width < window.innerWidth) {\n      c.width = window.innerWidth;\n    }\n\n    if (c.height < window.innerHeight) {\n      c.height = window.innerHeight;\n    }\n  }\n  window.requestAnimFrame(go);\n\n  document.addEventListener(\"mousemove\", MSMV, false);\n  document.addEventListener(\"mousedown\", MSDN, false);\n  document.addEventListener(\"mouseup\", MSUP, false);\n\n  document.addEventListener(\"touchstart\", MSDN, false);\n  document.addEventListener(\"touchmove\", MSMV, false);\n  document.addEventListener(\"touchend\", MSUP, false);\n\n  function MSDN(e) {\n    msdn = true;\n  }\n\n  function MSUP(e) {\n    msdn = false;\n  }\n\n  function MSMV(e) {\n    var rect = e.target.getBoundingClientRect();\n    msX = e.clientX - rect.left;\n    msY = e.clientY - rect.top;\n  }\n\n  function run() {\n    window.requestAnimFrame(calls);\n    window.requestAnimFrame(run, 33);\n  }\n\n  run();\n  resize();\n};\n\nexport { startAnimation };\n","import { useEffect, useState, useLayoutEffect, useCallback } from \"react\";\nimport PlayIcon from \"./play.svg\";\nimport PauseIcon from \"./pause.svg\";\nimport { startAnimation } from \"./animation\";\n\nconst audio = new Audio();\n\nfunction App() {\n  const [track, setTrack] = useState(null);\n  const [playing, setPlaying] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [canplay, setCanplay] = useState(false);\n\n  const getNextTrack = () => {\n    return fetch(\"https://api.joinrave.com/current\")\n      .then((response) => response.json())\n      .then((response) => {\n        setTrack(response);\n        audio.src = response.metadata.file;\n        audio.load();\n      });\n  };\n\n  const play = useCallback(() => {\n    setLoading(true);\n    getNextTrack().catch(() => {\n      setLoading(false);\n    });\n  }, []);\n\n  const stop = () => {\n    audio.pause();\n    setPlaying(false);\n    setCanplay(false);\n  };\n\n  const onCanplay = useCallback(() => {\n    if (!canplay) {\n      setCanplay(true);\n    }\n  }, [canplay]);\n\n  useEffect(() => {\n    if (canplay && track) {\n      audio.currentTime = track.time;\n      audio.play();\n      setPlaying(true);\n      setLoading(false);\n    }\n  }, [canplay, track]);\n\n  useEffect(() => {\n    audio.addEventListener(\"ended\", play);\n    audio.addEventListener(\"canplay\", onCanplay);\n    return () => {\n      audio.removeEventListener(\"ended\", play);\n      audio.removeEventListener(\"canplay\", onCanplay);\n    };\n  }, [play, onCanplay]);\n\n  useLayoutEffect(() => {\n    try {\n      startAnimation();\n    } catch (e) {\n      console.log(e);\n    }\n  }, []);\n\n  return (\n    <>\n      <canvas id=\"canv\" width=\"2265\" height=\"1465\"></canvas>\n      <div className=\"app\">\n        {playing ? (\n          <img alt=\"Pause\" src={PauseIcon} onClick={stop} />\n        ) : (\n          <img alt=\"Play\" src={PlayIcon} onClick={play} />\n        )}\n        <div className=\"info\">\n          {loading && \"Loading...\"}\n          {!loading && track && (\n            <>\n              {track?.metadata?.title} by <b>{track?.metadata?.artist}</b>\n            </>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport \"./animation\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}