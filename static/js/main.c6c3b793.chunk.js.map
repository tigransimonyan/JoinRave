{"version":3,"sources":["play.svg","pause.svg","App.js","index.js"],"names":["audio","Audio","App","useState","track","setTrack","playing","setPlaying","loading","setLoading","canplay","setCanplay","play","fetch","then","response","json","src","metadata","file","load","catch","onCanplay","useEffect","currentTime","time","addEventListener","removeEventListener","useLayoutEffect","window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","parts","gnum","_x","_y","w","h","P1","P2","ŭ","msX","msY","msdn","Part","this","x","y","vx","vy","ind_x","ind_y","draw_each","p1","p2","p3","p4","$","moveTo","lineTo","calls","fillStyle","fillRect","i","j","frame","mv_part","strokeStyle","beginPath","stroke","draw","prototype","ax","ay","off_dx","off_dy","dx","dy","ɋ","Math","sqrt","c","document","getElementById","getContext","push","p","e","rect","target","getBoundingClientRect","clientX","left","clientY","top","onload","run","width","innerWidth","height","innerHeight","id","className","PauseIcon","onClick","pause","PlayIcon","title","artist","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.c6c3b793.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/play.67fb6362.svg\";","export default __webpack_public_path__ + \"static/media/pause.12407eb8.svg\";","import { useEffect, useState, useLayoutEffect } from \"react\";\nimport PlayIcon from \"./play.svg\";\nimport PauseIcon from \"./pause.svg\";\n\nconst audio = new Audio();\n\nfunction App() {\n  const [track, setTrack] = useState(null);\n  const [playing, setPlaying] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [canplay, setCanplay] = useState(false);\n\n  const getNextTrack = () => {\n    return fetch(\"https://api.joinrave.com/current\")\n      .then((response) => response.json())\n      .then((response) => {\n        setTrack(response);\n        audio.src = response.metadata.file;\n        audio.load();\n      });\n  };\n\n  const play = () => {\n    setLoading(true);\n    getNextTrack().catch(() => {\n      setLoading(false);\n    });\n  };\n\n  const stop = () => {\n    audio.pause();\n    setPlaying(false);\n    setCanplay(false);\n  };\n\n  const onCanplay = () => {\n    if (!canplay) {\n      setCanplay(true);\n    }\n  };\n\n  useEffect(() => {\n    if (canplay && track) {\n      audio.currentTime = track.time;\n      audio.play();\n      setPlaying(true);\n      setLoading(false);\n    }\n  }, [canplay, track]);\n\n  useEffect(() => {\n    audio.addEventListener(\"ended\", play);\n    audio.addEventListener(\"canplay\", onCanplay);\n    return () => {\n      audio.removeEventListener(\"ended\", play);\n      audio.removeEventListener(\"canplay\", onCanplay);\n    };\n  }, []);\n\n  useLayoutEffect(() => {\n    window.requestAnimFrame = (function (callback) {\n      return (\n        window.requestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        window.oRequestAnimationFrame ||\n        window.msRequestAnimationFrame ||\n        function (callback) {\n          window.setTimeout(callback, 1000 / 60);\n        }\n      );\n    })();\n\n    var gnum = 90; //num grids / frame\n    var _x = 2265; //x width (canvas width)\n    var _y = 1465; //y height (canvas height)\n    var w = _x / gnum; //grid sq width\n    var h = _y / gnum; //grid sq height\n    var $; //context\n    var parts; //particles\n    var frm = 0; //value from\n    var P1 = 0.0005; //point one\n    var P2 = 0.01; //point two\n    var n = 0.98; //n value for later\n    var n_vel = 0.02; //velocity\n    var ŭ = 0; //color update\n    var msX = 0; //mouse x\n    var msY = 0; //mouse y\n    var msdn = false; //mouse down flag\n\n    var Part = function () {\n      this.x = 0; //x pos\n      this.y = 0; //y pos\n      this.vx = 0; //velocity x\n      this.vy = 0; //velocity y\n      this.ind_x = 0; //index x\n      this.ind_y = 0; //index y\n    };\n\n    Part.prototype.frame = function () {\n      if (\n        this.ind_x == 0 ||\n        this.ind_x == gnum - 1 ||\n        this.ind_y == 0 ||\n        this.ind_y == gnum - 1\n      ) {\n        return;\n      }\n\n      var ax = 0; //angle x\n      var ay = 0; //angle y\n      //off_dx, off_dy = offset distance x, y\n      var off_dx = this.ind_x * w - this.x;\n      var off_dy = this.ind_y * h - this.y;\n      ax = P1 * off_dx;\n      ay = P1 * off_dy;\n\n      ax -= P2 * (this.x - parts[this.ind_x - 1][this.ind_y].x);\n      ay -= P2 * (this.y - parts[this.ind_x - 1][this.ind_y].y);\n\n      ax -= P2 * (this.x - parts[this.ind_x + 1][this.ind_y].x);\n      ay -= P2 * (this.y - parts[this.ind_x + 1][this.ind_y].y);\n\n      ax -= P2 * (this.x - parts[this.ind_x][this.ind_y - 1].x);\n      ay -= P2 * (this.y - parts[this.ind_x][this.ind_y - 1].y);\n\n      ax -= P2 * (this.x - parts[this.ind_x][this.ind_y + 1].x);\n      ay -= P2 * (this.y - parts[this.ind_x][this.ind_y + 1].y);\n\n      this.vx += ax - this.vx * n_vel;\n      this.vy += ay - this.vy * n_vel;\n\n      this.x += this.vx * n;\n      this.y += this.vy * n;\n      if (msdn) {\n        var dx = this.x - msX;\n        var dy = this.y - msY;\n        var ɋ = Math.sqrt(dx * dx + dy * dy);\n        if (ɋ < 50) {\n          ɋ = ɋ < 10 ? 10 : ɋ;\n          this.x -= (dx / ɋ) * 5;\n          this.y -= (dy / ɋ) * 5;\n        }\n      }\n    };\n\n    function go() {\n      parts = []; //particle array\n      for (var i = 0; i < gnum; i++) {\n        parts.push([]);\n        for (var j = 0; j < gnum; j++) {\n          var p = new Part();\n          p.ind_x = i;\n          p.ind_y = j;\n          p.x = i * w;\n          p.y = j * h;\n          parts[i][j] = p;\n        }\n      }\n    }\n    //move particles function\n    function mv_part() {\n      for (var i = 0; i < gnum; i++) {\n        for (var j = 0; j < gnum; j++) {\n          var p = parts[i][j];\n          p.frame();\n        }\n      }\n    }\n    //draw grid function\n    function draw() {\n      $.strokeStyle = \"hsla(\" + (ŭ % 360) + \",100%,50%,1)\";\n      $.beginPath();\n      ŭ -= 0.5;\n      for (var i = 0; i < gnum - 1; i += 1) {\n        for (var j = 0; j < gnum - 1; j += 1) {\n          var p1 = parts[i][j];\n          var p2 = parts[i][j + 1];\n          var p3 = parts[i + 1][j + 1];\n          var p4 = parts[i + 1][j];\n          draw_each(p1, p2, p3, p4);\n        }\n      }\n      $.stroke();\n    }\n    //draw each in array\n    function draw_each(p1, p2, p3, p4) {\n      $.moveTo(p1.x, p1.y);\n      $.lineTo(p2.x, p2.y);\n      $.moveTo(p1.x, p1.y);\n      $.lineTo(p4.x, p4.y);\n\n      if (p1.ind_x == gnum - 2) {\n        $.moveTo(p3.x, p3.y);\n        $.lineTo(p4.x, p4.y);\n      }\n      if (p1.ind_y == gnum - 2) {\n        $.moveTo(p3.x, p3.y);\n        $.lineTo(p2.x, p2.y);\n      }\n    }\n    //call functions to run\n    function calls() {\n      $.fillStyle = \"hsla(0, 5%, 5%, .1)\";\n      $.fillRect(0, 0, _x, _y);\n\n      mv_part();\n      draw();\n      frm++;\n    }\n\n    var c = document.getElementById(\"canv\");\n    var $ = c.getContext(\"2d\");\n    $.fillStyle = \"hsla(0, 5%, 5%, .1)\";\n    $.fillRect(0, 0, _x, _y);\n\n    function resize() {\n      if (c.width < window.innerWidth) {\n        c.width = window.innerWidth;\n      }\n\n      if (c.height < window.innerHeight) {\n        c.height = window.innerHeight;\n      }\n    }\n    window.requestAnimFrame(go);\n\n    document.addEventListener(\"mousemove\", MSMV, false);\n    document.addEventListener(\"mousedown\", MSDN, false);\n    document.addEventListener(\"mouseup\", MSUP, false);\n\n    function MSDN(e) {\n      msdn = true;\n    }\n\n    function MSUP(e) {\n      msdn = false;\n    }\n\n    function MSMV(e) {\n      var rect = e.target.getBoundingClientRect();\n      msX = e.clientX - rect.left;\n      msY = e.clientY - rect.top;\n    }\n    window.onload = function () {\n      run();\n\n      function run() {\n        window.requestAnimFrame(calls);\n        window.requestAnimFrame(run, 33);\n      }\n      resize();\n    };\n  }, []);\n\n  return (\n    <>\n      <canvas id=\"canv\" width=\"2265\" height=\"1465\"></canvas>\n      <div className=\"app\">\n        {playing ? (\n          <img src={PauseIcon} onClick={stop} />\n        ) : (\n          <img src={PlayIcon} onClick={play} />\n        )}\n        <div className=\"info\">\n          {loading && \"Loading...\"}\n          {!loading && track && (\n            <>\n              {track?.metadata?.title} by <b>{track?.metadata?.artist}</b>\n            </>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport \"./animation\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}