{"version":3,"sources":["play.svg","pause.svg","App.js","index.js"],"names":["audio","Audio","App","useState","track","setTrack","playing","setPlaying","loading","setLoading","canPlay","setCanPlay","play","fetch","then","response","json","src","metadata","file","catch","onPlaying","onCanplay","useEffect","currentTime","time","volume","addEventListener","removeEventListener","className","PauseIcon","onClick","pause","PlayIcon","title","artist","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8JAAe,MAA0B,iCCA1B,MAA0B,kC,OCInCA,EAAQ,IAAIC,MA0EHC,MAxEf,WAAgB,IAAD,MACaC,mBAAS,MADtB,mBACNC,EADM,KACCC,EADD,OAEiBF,oBAAS,GAF1B,mBAENG,EAFM,KAEGC,EAFH,OAGiBJ,oBAAS,GAH1B,mBAGNK,EAHM,KAGGC,EAHH,OAIiBN,oBAAS,GAJ1B,mBAINO,EAJM,KAIGC,EAJH,KAePC,EAAO,WACXH,GAAW,GACXF,GAAW,GAVJM,MAAM,iCACVC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACC,GACLV,EAASU,GACTf,EAAMiB,IAAMF,EAASG,SAASC,QAOnBC,OAAM,WACnBX,GAAW,GACXF,GAAW,OASTc,EAAY,WAChBZ,GAAW,GACXF,GAAW,IAGPe,EAAY,WAChBX,GAAW,IAsBb,OAnBAY,qBAAU,WACJb,GAAWN,IACbJ,EAAMwB,YAAcpB,EAAMqB,KAC1BzB,EAAM0B,OAAS,EACf1B,EAAMY,UAEP,CAACF,EAASN,IAEbmB,qBAAU,WAIR,OAHAvB,EAAM2B,iBAAiB,QAASf,GAChCZ,EAAM2B,iBAAiB,UAAWL,GAClCtB,EAAM2B,iBAAiB,UAAWN,GAC3B,WACLrB,EAAM4B,oBAAoB,QAAShB,GACnCZ,EAAM4B,oBAAoB,UAAWN,GACrCtB,EAAM4B,oBAAoB,UAAWP,MAEtC,IAGD,sBAAKQ,UAAU,MAAf,UACGvB,EAAU,qBAAKW,IAAKa,EAAWC,QAnCvB,WACX/B,EAAMgC,QACNzB,GAAW,MAiC2C,qBAAKU,IAAKgB,EAAUF,QAASnB,IACjF,sBAAKiB,UAAU,OAAf,UACGrB,GAAW,cACVA,GAAWJ,GACX,4CACGA,QADH,IACGA,GADH,UACGA,EAAOc,gBADV,aACG,EAAiBgB,MADpB,OAC8B,mCAAI9B,QAAJ,IAAIA,GAAJ,UAAIA,EAAOc,gBAAX,aAAI,EAAiBiB,mBCjE7DC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.8d642be5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/play.67fb6362.svg\";","export default __webpack_public_path__ + \"static/media/pause.12407eb8.svg\";","import { useState, useEffect } from 'react';\nimport PlayIcon from './play.svg';\nimport PauseIcon from './pause.svg';\n\nconst audio = new Audio();\n\nfunction App() {\n  const [track, setTrack] = useState(null);\n  const [playing, setPlaying] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [canPlay, setCanPlay] = useState(false);\n\n  const getNextTrack = () => {\n    return fetch('http://localhost:9003/current')\n      .then((response) => response.json())\n      .then((response) => {\n        setTrack(response);\n        audio.src = response.metadata.file;\n      });\n  };\n\n  const play = () => {\n    setLoading(true);\n    setPlaying(true);\n    getNextTrack().catch(() => {\n      setLoading(false);\n      setPlaying(false);\n    });\n  };\n\n  const stop = () => {\n    audio.pause();\n    setPlaying(false);\n  };\n\n  const onPlaying = () => {\n    setLoading(false);\n    setPlaying(true);\n  };\n\n  const onCanplay = () => {\n    setCanPlay(true);\n  };\n\n  useEffect(() => {\n    if (canPlay && track) {\n      audio.currentTime = track.time;\n      audio.volume = 1;\n      audio.play();\n    }\n  }, [canPlay, track]);\n\n  useEffect(() => {\n    audio.addEventListener('ended', play);\n    audio.addEventListener('canplay', onCanplay);\n    audio.addEventListener('playing', onPlaying);\n    return () => {\n      audio.removeEventListener('ended', play);\n      audio.removeEventListener('canplay', onCanplay);\n      audio.removeEventListener('playing', onPlaying);\n    };\n  }, []);\n\n  return (\n    <div className=\"app\">\n      {playing ? <img src={PauseIcon} onClick={stop} /> : <img src={PlayIcon} onClick={play} />}\n      <div className=\"info\">\n        {loading && 'Loading...'}\n        {!loading && track && (\n          <>\n            {track?.metadata?.title} by <b>{track?.metadata?.artist}</b>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}